"use strict";angular.module("guxRest",["ngResource"]),angular.module("convideoApp",["ngCookies","ngSanitize","ui.bootstrap","ui.router","gc.toaster","guxRest","angularFileUpload"]).config(["$stateProvider","$urlRouterProvider","$locationProvider","$httpProvider",function(a,b,c,d){b.otherwise("/"),c.html5Mode(!0),d.interceptors.push("authInterceptor")}]).factory("authInterceptor",["$rootScope","$q","$cookieStore","$location",function(a,b,c,d){return{request:function(a){return a.headers=a.headers||{},c.get("token")&&(a.headers.Authorization="Bearer "+c.get("token")),a},responseError:function(a){return 401===a.status?(d.path("/login"),c.remove("token"),b.reject(a)):b.reject(a)}}}]).run(["$rootScope","$location","Auth",function(a,b,c){a.$on("$stateChangeStart",function(a,d){d.authenticate&&!c.isLoggedIn()&&b.path("/login")})}]),angular.module("convideoApp").config(["$stateProvider",function(a){a.state("login",{url:"/login",templateUrl:"app/account/login/login.html",controller:"LoginCtrl"}).state("signup",{url:"/signup",templateUrl:"app/account/signup/signup.html",controller:"SignupCtrl"}).state("settings",{url:"/settings",templateUrl:"app/account/settings/settings.html",controller:"SettingsCtrl"})}]),angular.module("convideoApp").controller("LoginCtrl",["$scope","Auth","$location","$window",function(a,b,c,d){a.user={},a.errors={},a.login=function(d){a.submitted=!0,d.$valid&&b.login({email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){a.errors.other=b.message})},a.loginOauth=function(a){d.location.href="/auth/"+a}}]),angular.module("convideoApp").controller("SettingsCtrl",["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Password successfully changed."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Incorrect password",a.message=""})}}]),angular.module("convideoApp").directive("settings",function(){return{templateUrl:"app/account/settings/settings.html",restrict:"E",controller:["$scope","User","Auth",function(a,b,c){a.errors={},a.changePassword=function(b){a.submitted=!0,b.$valid&&c.changePassword(a.user.oldPassword,a.user.newPassword).then(function(){a.message="Su contraseña se ha actualizado con exito."})["catch"](function(){b.password.$setValidity("mongoose",!1),a.errors.other="Contraseña Incorrecto",a.message=""})}}]}}),angular.module("convideoApp").controller("SignupCtrl",["$scope","Auth","$location",function(a,b,c){a.user={},a.errors={},a.register=function(d){a.submitted=!0,d.$valid&&b.createUser({name:a.user.name,email:a.user.email,password:a.user.password}).then(function(){c.path("/")})["catch"](function(b){b=b.data,a.errors={},angular.forEach(b.errors,function(b,c){d[c].$setValidity("mongoose",!1),a.errors[c]=b.message})})}}]),angular.module("convideoApp").controller("AdminCtrl",["$location",function(a){this.current=a.url}]),angular.module("convideoApp").config(["$stateProvider",function(a){a.state("admin",{state:"abstract",url:"/admin",templateUrl:"app/admin/admin.html",controller:"AdminCtrl as admin"}).state("admin.videos",{url:"/videos",template:'<videos-admin videos="videos.collection" categories="videos.categories"></videos-admin>',controller:"VideosAdminCtrl as videos",resolve:{videos:["VideosCollection",function(a){return(new a).fetch()}],categories:["CategoriesCollection",function(a){return(new a).fetch()}]}}).state("admin.questions",{url:"/questions",template:'<questions-admin questions="questions.collection""></questions-admin>',controller:"QuestionsAdminCtrl as questions",resolve:{questions:["QuestionsCollection",function(a){return(new a).fetch()}]}}).state("admin.categories",{url:"/categories",template:'<categories categories="categories.collection"></categories>',controller:"CategoriesAdminCtrl as categories",resolve:{categories:["CategoriesCollection",function(a){return(new a).fetch()}]}}).state("admin.users",{url:"/users",template:"<users></users>"}).state("admin.settings",{url:"/settings",template:"<settings></settings>"})}]),angular.module("convideoApp").factory("UsersCollection",["Collection","UsersModel",function(a,b){var c=a.extend({model:b});return c}]),angular.module("convideoApp").directive("users",function(){return{templateUrl:"app/admin/users/users.html",restrict:"E",controller:["$scope","$http","Auth","User","UsersModel","UsersCollection","toaster",function(a,b,c,d,e,f,g){var h=this;(this.collection=new f).fetch(),this.active=new d,this["delete"]=function(a){d.remove({id:a._id}),this.collection.remove(a),g.add({type:"success",title:"Exito!",message:"Usuario eliminado con exito!"})},this.isAdmin=c.isAdmin,this.save=function(){var a;this.active.save().then(function(){h.newUser?(a="Usuario creado con exito.",h.collection.push(h.active),h.active=new e):a="Usuario actualizado con exito.",g.add({type:"success",title:"Exito!",message:a})})},this.edit=function(a){this.active=a,this.showForm=!0,this.newUser=!1},this["new"]=function(){this.active=new e,this.showForm=!0,this.newUser=!0},this.cancel=function(a){a&&a.preventDefault(),this.showForm=!1}}],controllerAs:"users"}}),angular.module("convideoApp").factory("UsersModel",["Model",function(a){var b=a.extend({endpoint:"User",defaults:{}});return b}]),angular.module("convideoApp").factory("CategoriesCollection",["Collection","CategoriesModel",function(a,b){var c=a.extend({model:b,links:function(){var a=this;return _.map(a.data,function(a){var b="videos/"+a._id;return{name:a.get("name"),enabled:a.get("enabled"),icon:a.icon[a.get("type")],url:b}})},names:function(){var a=this,b={};return _.forEach(a.data,function(a){b[a.get("_id")]=a.get("name")}),b}});return c}]),angular.module("convideoApp").directive("categories",function(){return{templateUrl:"app/categories/categories.html",restrict:"E",scope:{categories:"="},controller:["$scope","categoriesTableValue","toaster",function(a,b,c){var d=this;d.collection=a.categories,d.actions=function(a){var b,e=a,f=d.collection.find(e);f.set("enabled",!f.get("enabled")),b=f.get("enabled")?"Habilitada":"Deshabilitada",f.save().then(function(){c.add({title:"Categoria "+b,type:"success"})})},d.fetch=function(){return d.collection.fetch().then(function(a){var b;b=a?{title:"Exito!",type:"success",message:"Las categorías se han actualizado con exito"}:{title:"Error!",message:"Ha ocurrido un error al actualizar.",type:"danger"},c.add(b)})},d.tableData=b}],controllerAs:"categories"}}),angular.module("convideoApp").factory("CategoriesModel",["Model",function(a){var b=a.extend({endpoint:"Category",icon:{Videos:"fa-video-camera",FAQ:"fa-question",Documentos:"fa-file-text-o"},defaults:{type:"Videos"}});return b}]),angular.module("convideoApp").controller("CategoriesAdminCtrl",["categories",function(a){this.collection=a}]),angular.module("convideoApp").service("categoriesTableValue",["controlsTemplateValue","toggleEnable",function(a,b){return{headers:[{header:"Nombre",attribute:"name",visible:!0,content:"{{ model.name }}"},{header:"Descripción",attribute:"description",visible:!0,content:"{{ model.description }}"},{header:"Creado",attribute:"createdAt",visible:!0,content:"{{ model.createdAt | date: 'dd/MM/yyyy' }}"}],options:{controller:{toggleEnable:b({on:"Habilitada",off:"Deshabilitada",modelName:"Categoría"})},controlsTemplate:a}}}]),angular.module("convideoApp").directive("newCategory",function(){return{templateUrl:"app/categories/newCategory/newCategory.html",restrict:"E",controller:["CategoriesModel",function(a){this.model=new a,this.submit=function(){this.model.save(),this.model=new a}}],controllerAs:"newCategory"}}),angular.module("convideoApp").controller("MainCtrl",["$scope","$http","Auth",function(a,b,c){a.awesomeThings=[],b.get("/api/things").success(function(b){a.awesomeThings=b}),a.addThing=function(){""!==a.newThing&&(b.post("/api/things",{name:a.newThing}),a.newThing="")},a.deleteThing=function(a){b["delete"]("/api/things/"+a._id)},a.isAdmin=c.isAdmin,a.logout=c.logout,a.isLoggedIn=c.isLoggedIn}]),angular.module("convideoApp").config(["$stateProvider",function(a){a.state("main",{url:"/",templateUrl:"app/main/main.html",controller:"MainCtrl"})}]),angular.module("convideoApp").directive("newQuestion",function(){return{templateUrl:"app/questions/newQuestionForm/newQuestionForm.html",restrict:"E",scope:{_category:"@category",editModel:"="},controller:["$scope","QuestionsModel","toaster",function(a,b,c){var d=this;d.model=new b({_category:a._category}),d.submit=function(){d.isSaving=!0,d.model.save().then(function(){d.isSaving=!1,c.add(d.model.isNew()?{type:"success",title:"Exito!",message:"Pregunta creada con exito."}:{type:"success",title:"Exito!",message:"Pregunta actualizada con exito."})}),d.model.isNew()&&(d.model=new b({_category:a.category}))}}],controllerAs:"newQuestion",link:function(a){a.$watch("editModel",function(b){null!==b&&void 0!==b&&(a.newQuestion.model=b)})}}}),angular.module("convideoApp").directive("question",function(){return{templateUrl:"app/questions/question/question.html",restrict:"E",scope:{model:"="},controller:["$scope",function(a){this.model=a.model}],controllerAs:"question"}}),angular.module("convideoApp").factory("QuestionsCollection",["Collection","QuestionsModel","Api",function(a,b,c){var d=a.extend({model:b,fetchByCategory:function(a){var b=this;return c.Question.index({_category:a},function(a){b.add(a)}).$promise}});return d}]),angular.module("convideoApp").factory("QuestionsModel",["Model",function(a){var b=a.extend({endpoint:"Question"});return b}]),angular.module("convideoApp").controller("QuestionsAdminCtrl",["questions",function(a){this.collection=a}]),angular.module("convideoApp").directive("questionsAdmin",function(){return{templateUrl:"app/questions/questionsAdmin/questionsAdmin.html",restrict:"E",scope:{questions:"="},controller:["$scope","toaster","questionsTableValue",function(a,b,c){var d=this;d.collection=a.questions,d.active=null,d.fetch=function(){return d.collection.fetch().then(function(a){var c;c=a?{title:"Exito!",type:"success",message:"Las preguntas se han actualizado con exito"}:{title:"Error!",message:"Ha ocurrido un error al actualizar.",type:"danger"},b.add(c)})},d.activate=function(a){d.active=d.collection.find(a),d.editTab=!0},d.tableData=c,d.actions=function(a){var c,e=a,f=d.collection.find(e);f.set("enabled",!f.get("enabled")),c=f.get("enabled")?"Habilitada":"Deshabilitada",f.save().then(function(){b.add({title:"Pregunta "+c,type:"success"})})}}],controllerAs:"questions"}}),angular.module("convideoApp").service("QuestionsTable",["questionsTableValue",function(a){return function(b){var c=_.cloneDeep(a);return c.options.categoryIDtoName=b.names(),c}}]),angular.module("convideoApp").service("questionsTableValue",["controlsTemplateValue","toggleEnable",function(a,b){return{headers:[{header:"Categoría",attribute:"_category",visible:!0,content:"{{ model._category.name }}"},{header:"Nombre",attribute:"name",visible:!0,content:"{{ model.name }}"},{header:"Pregunta",attribute:"question",visible:!0,content:"{{ model.question }}"},{header:"Respondido",attribute:"answer",bodyClass:"text-center",visible:!0,content:"<i class=\"fa\" ng-class=\"{'fa-check text-success': model.answer, 'fa-minus text-muted': !model.answer}\"></i>"},{header:"Creado",attribute:"createdAt",visible:!0,content:"{{ model.createdAt | date: 'dd/MM/yyyy' }}"},{header:"Respondido",attribute:"answeredBy.name",visible:!0,content:"{{ model.answeredBy.name }}"},{header:"Modificado",attribute:"updatedBy.name",visible:!0,content:"{{ model.updatedBy.name }}"}],options:{controller:{toggleEnable:b({on:"Habilitada",off:"Deshabilitada",modelName:"Pregunta"})},controlsTemplate:a}}}]),angular.module("convideoApp").directive("newVideo",function(){return{templateUrl:"app/videos/newVideo/newVideo.html",restrict:"E",scope:{editModel:"=",categories:"="},controller:["$rootScope","$scope","$upload","VideosModel","toaster",function(a,b,c,d,e){var f=this;f.model=new d,f.rootUrl="/api/videos/upload/",f.fileName="",f.progress=0,f.upload=function(b,d){return c.upload({url:f.rootUrl+(f.model.get("name")||_.uniqueId("video_")),method:"POST",file:b}).progress(function(a){f.progress=parseInt(100*a.loaded/a.total)}).success(function(a){e.add({type:"success",title:"Exito!",message:"Su video se ha subido correctamente."}),f.progress=0,f.model.set("source","/assets/videos/"+a.name),f.model.set("oldSource",void 0),d(a)}).error(function(){e.add({type:"danger",title:"Error!",message:"Ha ocurrido un error inesperado al intentar subir el video"}),a.$emit("stopLoading")})},f.submit=function(){"Video Local"===f.model.get("type")&&f.file?(a.$emit("loading"),f.upload(f.file,f.save)):f.save()},f.pluckData=function(){f.categories=b.categories.pluckData()},f.fetchCategories=function(a){a&&a.preventDefault();var c=b.categories.fetch();return c.then(function(){f.pluckData()}),c},f.fileChange=function(a){var b=a[0];f.file=b},f.save=function(){f.model.save().then(function(){e.add(f.model.isNew()?{type:"success",title:"Exito!",message:"Video creado con exito."}:{type:"success",title:"Exito!",message:"Video actualizado con exito."})}),f.model.isNew()&&(f.model=new d),a.$emit("stopLoading")},f.toggleUploadField=function(a){a&&a.preventDefault();var b=f.model.get("oldSource");b?(f.model.set("source",f.model.get("oldSource")),f.model.set("oldSource",void 0)):(f.model.set("oldSource",f.model.get("source")),f.model.set("source",void 0))}}],controllerAs:"newVideo",link:function(a){a.$watch("editModel",function(b){void 0!==b&&null!==b&&(a.newVideo.model=b)}),a.$watch("categories",function(b){b&&a.newVideo.pluckData()})}}}),angular.module("convideoApp").factory("VideosCollection",["Collection","VideosModel","Api",function(a,b,c){var d=a.extend({constructor:function(b,c){c=_.isUndefined(c)?{}:c,c._category&&(this._category=c._category,delete c._category),a.prototype.constructor.apply(this,arguments)},model:b,fetch:function(b){var d;if(b=_.isUndefined(b)?{}:b,this._category){var e=this,f=b.success;d=c.Video.index({_category:this._category},function(a){e.add(a),f&&f.apply(e,[e,a,b])}).$promise}else d=a.prototype.fetch.apply(this,[b]);return d},name:"Videos"});return d}]),angular.module("convideoApp").controller("VideosCtrl",["$scope","$stateParams","anchorSmoothScroll","videos","questions",function(a,b,c,d,e){var f=this;f.collection=d,f.current=f.collection.first(),f.questions=e,f.showForm=!1,f.toggleForm=function(){return this.showForm=!this.showForm},f.setCurrent=function(a){f.current=a,c.scrollTo("video-title")},f._category=b._category}]),angular.module("convideoApp").config(["$stateProvider",function(a){a.state("videos",{url:"/videos/:_category",templateUrl:"app/videos/videos.html",controller:"VideosCtrl as videos",resolve:{questions:["$stateParams","VideosCollection","QuestionsCollection",function(a,b,c){return(new c).fetch({_category:a._category,enabled:!0})}],videos:["$stateParams","VideosCollection",function(a,b){return(new b).fetch({_category:a._category,enabled:!0})}]}})}]),angular.module("convideoApp").factory("VideosModel",["Model",function(a){var b=a.extend({endpoint:"Video"});return b}]),angular.module("convideoApp").directive("videosTable",["$compile",function(a){return{templateUrl:"components/templates/defaultTable.html",restrict:"A",scope:{collection:"=",type:"@","delete":"&"},require:"^sedTable",link:function(b,c,d,e){function f(){return['<td class="vertical-align-middle row-controls">','<div class="btn-toolbar">','<div class="btn-group">','<button class="btn btn-info btn-xs">','{{model.name}} <i class="fa fa-ellipsis-h fa-fw"></i>',"</button>","</div>",'<div class="btn-group pull-right">','<button class="btn btn-danger btn-xs" ng-if="sedTable.isAdmin()" ng-click="sedTable.remove(model)">','<i class="fa fa-trash-o fa-fw"></i>',"</button>","</div>","</div>","</td>"].join("")}function g(){var d=angular.element("<tr></tr>"),e=angular.element("<tr></tr>");_.each(b.sedTable.data,function(a,b){var c=a.headerClass?' class="'+a.headerClass+'"':"",f=a.columnClass?' class="'+a.columnClass+'"':"";d.append("<th"+c+' class="pointer" ng-click="sedTable.sort(\''+a.attribute+'\')" ng-show="sedTable.data['+b+'].show">'+a.name+"<i class=\"pull-right fa\" ng-class=\"{'fa-chevron-down': sedTable.sortField === '"+a.attribute+"' && sedTable.sortReverse === true, 'fa-chevron-up': sedTable.sortField === '"+a.attribute+"' && sedTable.sortReverse === false }\"></i></th>"),e.append("<td"+f+' ng-show="sedTable.data['+b+'].show">'+a.content+"</td>")}),e.append(f(b.type)),e.attr("ng-repeat",["model in sedTable.collection.data","| orderBy:sedTable.sortField:sedTable.sortReverse","| filter:sedTable.search()","| startFrom:(sedTable.currentPage-1) * sedTable.modelsPerPage","| limitTo:sedTable.modelsPerPage"].join("")),e.attr("ng-click","sedTable.selectRow(model)"),e.attr("ng-class","{ 'row-selected': sedTable.selectedModel._id === model._id }"),d=a(d)(b),e=a(e)(b),c.find("thead").html(d),c.find("tbody").html(e)}function h(){var a=b.$eval(d.hideColumnsArray);_.forEach(a,function(a){var c=_.find(b.sedTable.data,function(b){return b.attribute===a});c&&(c.show=!1)})}b.sedTable=e,b.sedTable.collection=b.collection,b.sedTable["delete"]=b["delete"],b.sedTable.data=[{attribute:"_category",name:"Categoría",show:!0,content:"{{model.get('_category')}}"},{attribute:"name",name:"Nombre",show:!0,content:"{{model.get('name')}}"},{attribute:"description",name:"Descripción",show:!0,content:"{{model.get('description')}}"},{attribute:"type",name:"Tipo",show:!0,content:"{{model.get('type')}}"},{attribute:"createdAt",name:"Creado",show:!0,content:"{{model.getInDate('createdAt')}}"},{attribute:"createdBy",name:"Usuario",show:!0,content:"{{model.get('createdBy')}}"}],b.sortField="_category",b.$watch("sedTable.collection",function(a){b.sedTable.totalItems=a.length}),b.sedTable.remove=function(a){b["delete"]({model:a})},g(),h()}}}]),angular.module("convideoApp").controller("VideosAdminCtrl",["videos","categories",function(a,b){this.collection=a,this.categories=b}]),angular.module("convideoApp").directive("videosAdmin",function(){return{templateUrl:"app/videos/videosAdmin/videosAdmin.html",restrict:"E",scope:{videos:"=",categories:"="},controller:["$scope","$rootScope","toaster","videosTableValue",function(a,b,c,d){var e=this;e.collection=a.videos,e.active=null,e.fetch=function(){return e.collection.fetch().then(function(a){var b;b=a?{title:"Exito!",type:"success",message:"Los videos se han actualizado con exito"}:{title:"Error!",message:"Ha ocurrido un error al actualizar.",type:"danger"},c.add(b)})},e.activate=function(a){e.active=e.collection.find(a),e.editTab=!0},e.tableData=d,e.actions=function(a){var b,d=a,f=e.collection.find(d);f.set("enabled",!f.get("enabled")),b=f.get("enabled")?"Habilitado":"Deshabilitado",f.save().then(function(){c.add({title:"Video "+b,type:"success"})})}}],controllerAs:"videos"}}),angular.module("convideoApp").service("videosTableValue",["controlsTemplateValue","toggleEnable",function(a,b){return{headers:[{header:"Categoría",attribute:"_category.name",visible:!0,content:"{{ model._category.name }}"},{header:"Nombre",attribute:"name",visible:!0,content:"{{ model.name }}"},{header:"Descripción",attribute:"description",visible:!0,content:'{{ model.description | limitTo:(guxTable.controller.descriptionsLength[model._id] || 200)}} <button ng-hide="model.description.length < 201 || !model.description" ng-click="guxTable.controller.showAll(model._id)" class="btn btn-xs"><i class="fa" ng-class="{true: \'fa-minus\', false: \'fa-plus\'}[guxTable.controller.descriptionsLength[model._id] > 200]"></i></button>'},{header:"Tipo",attribute:"type",visible:!0,content:"{{ model.type }}"},{header:"Creado",attribute:"createdAt",visible:!0,content:"{{ model.createdAt | date: 'dd/MM/yyyy' }}"},{header:"Usuarios",attribute:"createdBy.name",headerClass:"column-2x",visible:!0,content:'<small class="text-muted">Creado: </small><span class="pull-right">{{ model.createdBy.name }}</span> <span ng-if="model.updatedBy"><br /><small class="text-muted">Modificado: </small><span class="pull-right">{{model.updatedBy.name}}</span></span>'}],options:{controller:{descriptionsLength:[],showAll:function(a){var b=this.descriptionsLength[a];this.descriptionsLength[a]=_.isUndefined(b)||200===b?3e3:200},toggleEnable:b({on:"Habilitado",off:"Deshabilitado",modelName:"Video"})},controlsTemplate:a}}}]),angular.module("convideoApp").factory("Auth",["$location","$rootScope","$http","User","$cookieStore","$q",function(a,b,c,d,e,f){var g={};return e.get("token")&&(g=d.get()),{login:function(a,b){var h=b||angular.noop,i=f.defer();return c.post("/auth/local",{email:a.email,password:a.password}).success(function(a){return e.put("token",a.token),g=d.get(),i.resolve(a),h()}).error(function(a){return this.logout(),i.reject(a),h(a)}.bind(this)),i.promise},logout:function(){e.remove("token"),g={}},createUser:function(a,b){var c=b||angular.noop;return d.save(a,function(b){return e.put("token",b.token),g=d.get(),c(a)},function(a){return this.logout(),c(a)}.bind(this)).$promise},changePassword:function(a,b,c){var e=c||angular.noop;return d.changePassword({id:g._id},{oldPassword:a,newPassword:b},function(a){return e(a)},function(a){return e(a)}).$promise},getCurrentUser:function(){return g},isLoggedIn:function(){return g.hasOwnProperty("role")},isAdmin:function(){return"admin"===g.role},getToken:function(){return e.get("token")}}}]),angular.module("convideoApp").factory("User",["$resource",function(a){return a("/api/users/:id/:controller",{id:"@_id"},{changePassword:{method:"PUT",params:{controller:"password"}},get:{method:"GET",params:{id:"me"}}})}]),angular.module("convideoApp").directive("guxTable",["$compile",function(a){return{templateUrl:"components/directives/guxTable/guxTable.html",restrict:"E",scope:{collection:"=",tableData:"=",edit:"&"},controller:["$scope",function(a){this.edit=function(b){a.edit({id:b})},this.actions=function(b){a.actions({object:b})},this.activate=function(a){this.active=a},this.sortAttr="_category",this.sortReverse=!1,this.sortBy=function(a){this.sortAttr===a?this.sortReverse=!this.sortReverse:this.sortAttr=a},this.paginationValues=[5,10,25,50,100,200,500,1e3],this.paginationValue=this.paginationValues[0],this.filter="",this.collection=a.collection,this.currentPage=1,this.filtered=[],this.controller=a.tableData.options.controller||{}}],controllerAs:"guxTable",link:function(b,c){function d(){var a=[],c=angular.element("<tr></tr>");return c.attr("ng-repeat",["model in guxTable.filtered = (guxTable.collection.pluckData() ","| orderBy:guxTable.sortAttr:guxTable.sortReverse","| filter:guxTable.filter",") ","| startFrom:(guxTable.currentPage-1)*guxTable.paginationValue","| limitTo:guxTable.paginationValue"].join("")),c.attr("id","{{model._id}}"),c.attr("ng-class","{'active': guxTable.active._id === model._id}"),c.attr("ng-click","guxTable.activate(model)"),_.forEach(b.tableData.headers,function(a){c.append('<td class="'+(a.bodyClass||"")+'">'+a.content+"</td>")}),a.push(['<td class="text-center">','<button ng-click="guxTable.edit((model._id || null))" class="btn btn-warning btn-xs">','<i class="fa fa-pencil"></i>',"</button>"].join("")),b.tableData.options&&_.isString(b.tableData.options.controlsTemplate)&&a.push(b.tableData.options.controlsTemplate),a.push("</td>"),c.append(a.join("")),c}function e(){var e=a(d())(b);c.find("tbody").html(e)}e()}}}]),angular.module("convideoApp").directive("sedTable",["$compile",function(){return{restrict:"E",controller:["$scope","Auth",function(a,b){var c=this;_.extend(c,{sortField:"_id",sortReverse:!1,searchString:"",filterField:"",filterFieldName:null,modelsPerPage:10,totalItems:0,currentPage:1}),c.isAdmin=b.isAdmin,c.sort=function(a){c.sortReverse=c.sortField===a?!c.sortReverse:!1,c.sortField=a},c.search=function(){var a={},b=[];if(""===c.filterField)return c.searchString;if(b=c.filterField.split("."),b.length>1){for(var d=0;d<b.length;d++)0===d?a[b[0]]={}:a[b[d-1]][b[d]]=d===b.length-1?c.searchString:{};return a}return a[c.filterField]=c.searchString,a},c.selectFilterField=function(a){_.isUndefined(a)&&(a={name:null,attribute:""}),c.filterFieldName=a.name,c.filterField=a.attribute},c.selectRow=function(a){return c.selectedModel&&c.selectedModel._id===a._id?void(c.selectedModel=null):void(c.selectedModel=a)},c.detailsState=function(){return c.selectedModel?c.type+"/"+c.selectedModel._id:"/"}}],controllerAs:"sedTable"}}]),angular.module("convideoApp").directive("videoItem",["$rootScope",function(a){return{templateUrl:"components/directives/videoItem/videoItem.html",scope:{model:"=",onClick:"&"},controller:["$scope",function(a){this.model=a.model,this.onClick=a.onClick,this.select=function(){this.onClick({model:this.model})}}],controllerAs:"video",restrict:"E",link:function(b,c,d){c.find("button[name=playNow]").bind("click",function(){a.$emit("video:selected",b.model.id),c.find("a.list-group-item").removeClass("active").addClass("active")}),a.$on("video:selected",function(a){b.model.id!==a&&c.find("a.list-group-item").removeClass("active")}),"true"===d.active&&c.find("a.list-group-item").addClass("active")}}}]),angular.module("convideoApp").filter("startFrom",function(){return function(a,b){return b=+b,a.slice(b)}}),angular.module("convideoApp").filter("startFrom",function(){return function(a,b){return b=+b,a.slice(b)}}),angular.module("convideoApp").filter("trusted",["$sce",function(a){return function(b){return a.trustAsResourceUrl(b)}}]),angular.module("convideoApp").factory("Api",["$resource",function(a){var b={create:{method:"POST"},index:{method:"GET",isArray:!0},show:{method:"GET",isArray:!1},update:{method:"PUT"},patch:{method:"PATCH"},destroy:{method:"DELETE"}};return{Video:a("/api/videos/:id",{id:"@_id"},b),Device:a("/api/categories/:id",{id:"@_id"},b),Thing:a("/api/things/:id",{id:"@_id"},b),Category:a("/api/categories/:id",{id:"@_id"},b),Question:a("/api/questions/:id",{id:"@_id"},b),User:a("/api/users/:id",{id:"@_id"},b)}}]),angular.module("convideoApp").factory("Collection",["Model","Sync","Extend",function(a,b,c){function d(a){if(_.isString(a)||_.isNumber(a))a=this.find(parseInt(a));else{if(!_.isObject(a)||_.isUndefined(a._id))return null;a=this.find(a._id)}var b=this.data.indexOf(a);return b>-1&&(this.data.splice(b,1),this.length--),this}function e(a){return _.find(this.data,function(b){return b._id===a})}function f(a){return this.data.push(a),this.length=this.length+1,this}function g(a){if(!_.isUndefined(a)&&!_.isUndefined(a._id)){var b=this.find(a._id);return b?b.set(a):(a=new this.model(a),this.push(a)),a}}function h(a){var b=this;if(_.isArray(a))return _.each(a,function(a){_.isObject(a)&&b.add1(a)}),this.data}function i(a){_.isObject(a)&&this.add1(a),_.isArray(a)&&this.addM(a)}function j(a){var c,d,e=this;return a?(d=b(this.model.prototype.endpoint,"index",a),c=a.success):d=b(this.model.prototype.endpoint,"index"),d.then(function(b){return e.add(b,a),c&&c.apply(e,[e,b,a]),e},function(a){console.log(a)})}function k(){var a=this;return _.map(a.data,function(a){return a.attributes})}var l=function(a,b){this.data=[],b||(b={}),this.options=_.extend({silent:!1},b),this.add(a)};return _.extend(l.prototype,{length:0,type:l,remove:d,find:e,push:f,add:i,add1:g,addM:h,first:function(){return this.data[0]},last:function(){return this.data[this.length-1]},fetch:j,pluckData:k}),l.extend=c,l}]),angular.module("convideoApp").factory("Extend",[function(){return function(a,b){var c,d=this;c=a&&_.has(a,"constructor")?a.constructor:function(){return d.apply(this,arguments)},_.extend(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&_.extend(c.prototype,a),c.__super__=d.constructor,c}}]),angular.module("convideoApp").factory("Model",["$filter","$rootScope","Sync","Extend",function(a,b,c,d){function e(a,c,d){var e,f,g,h,i=this.attributes;null===a||_.isObject(a)?(e=a,d=c):(e={})[a]=c,d=_.extend({},d);var j=this,k=d.success;return d.success=function(a){j.attributes=i;var c=j.parse(a,d);return _.isObject(c)&&!j.set(c,d)?!1:(k&&k(j,a,d),void b.$broadcast(j.endpoint.toLowerCase()+":sync:",a,d))},f=this.isNew()?"create":d.patch?"patch":"update",h="patch"===f?_.extend({id:this._id},e):this.attributes,g=this.sync(this.endpoint,f,h),g.then(d.success,function(a){console.log(a)}),g}function f(a,b,c){var d,e,f,g,h,i,j,k;if(null===a)return this;"object"==typeof a?(e=a,c=b):(e={})[a]=b,c||(c={}),f=c.unset,h=c.silent,g=[],i=this._changing,this._changing=!0,i||(this._previousAttributes=_.clone(this.attributes),this.changed={}),k=this.attributes,j=this._previousAttributes,_.isUndefined(e._id)||(this._id=e._id);for(d in e)e.hasOwnProperty(d)&&(b=e[d],_.isEqual(k[d],b)||g.push(d),_.isEqual(j[d],b)?delete this.changed[d]:this.changed[d]=b,f?delete k[d]:k[d]=b);if(h||g.length&&(this._pending=c),i)return this;if(!h)for(;this._pending;)c=this._pending,this._pending=!1;return this._pending=!1,this._changing=!1,this}function g(a){var b=this.defaults;this._id=void 0;for(var c in this.attributes)b[c]=void 0;return this.set(b,_.extend({},a,{unset:!0}))}function h(a){return null===a?!_.isEmpty(this.changed):_.has(this.changed,a)}function i(a){return null===a||this._previousAttributes?null:this._previousAttributes[a]}function j(){return _.clone(this._previousAttributes)}function k(a){if(_.isString(a)&&this.isNew()&&(this._id=a),!this._id)return!1;a=a?_.clone(a):{},void 0===a.parse&&(a.parse=!0);var c=this,d=a.success;this.sync(this.endpoint,"show",{id:this._id}).then(function(e){return c.set(c.parse(e,a),a)?(d&&d(c,e,a),void b.$broadcast("sync:"+c.endpoint,e,a)):!1},function(a){console.log(a)})}var l=function(a,b){var c=a||{};b||(b={}),this.cid=_.uniqueId("c"),this.attributes={},b.collection&&(this.collection=b.collection),b.parse&&(c=this.parse(c,b)||{}),c=_.defaults({},c,_.result(this,"defaults")),this.set(c,b),this.changed={},this.initialize.apply(this,[a,b]),this.attributes._id&&!_.isUndefined(this.attributes._id)&&(this._id=this.attributes._id)};return _.extend(l.prototype,{type:l,endpoint:"Model",sync:c,changed:null,idAttribute:"_id",initialize:function(){},toJSON:function(){return _.clone(this.attributes)},get:function(a){return this.attributes[a]},escape:function(a){return _.escape(this.get(a))},set:f,unset:function(a,b){return this.set(a,void 0,_.extend({},b,{unset:!0}))},clear:g,hasChanged:h,previous:i,parse:function(a){return a},isNew:function(){return!this.has(this.idAttribute)},has:function(a){return!_.isUndefined(this.get(a))},save:e,fetch:k,defaults:{},previousAttributes:j}),l.extend=d,l}]),angular.module("convideoApp").factory("Sync",["$rootScope","$q","Api",function(a,b,c){return function(d,e,f){function g(b){var c=d.toLowerCase()+":"+e;a.$broadcast(c,b,f),j.resolve(b)}function h(a){j.reject(a)}var i;if(_.isString(e)){f||(f={});var j=b.defer();return i=[g,h],i.unshift(f),c[d][e].apply(this,i),j.promise}}}]),angular.module("convideoApp").directive("loading",function(){return{templateUrl:"components/loading/loading.html",restrict:"E",controller:["$rootScope",function(a){var b=this;b.on=!1,a.$on("$stateChangeStart",function(a,c){c.resolve&&(b.on=!0)}),a.$on("$stateChangeSuccess",function(a,c){c.resolve&&(b.on=!1)}),a.$on("loading",function(){b.on=!0}),a.$on("stopLoading",function(){b.on=!1})}],controllerAs:"loading"}}),angular.module("convideoApp").directive("mongooseError",function(){return{restrict:"A",require:"ngModel",link:function(a,b,c,d){b.on("keydown",function(){return d.$setValidity("mongoose",!0)})}}}),angular.module("convideoApp").controller("NavbarCtrl",["$scope","$location","Auth",function(a,b,c){a.menu=[{title:"Home",link:"/"}],a.isCollapsed=!0,a.isLoggedIn=c.isLoggedIn,a.isAdmin=c.isAdmin,a.getCurrentUser=c.getCurrentUser,a.logout=function(){c.logout(),b.path("/login")},a.isActive=function(a){return a===b.path()}}]),angular.module("convideoApp").service("anchorSmoothScroll",function(){this.scrollTo=function(a){function b(){return self.pageYOffset?self.pageYOffset:document.documentElement&&document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop?document.body.scrollTop:0
}function c(a){for(var b=document.getElementById(a),c=b.offsetTop,d=b;d.offsetParent&&d.offsetParent!=document.body;)d=d.offsetParent,c+=d.offsetTop;return c}var d=b(),e=c(a),f=e>d?e-d:d-e;if(100>f)return void scrollTo(0,e);var g=Math.round(f/100);g>=20&&(g=20);var h=Math.round(f/25),i=e>d?d+h:d-h,j=0;if(e>d)for(var k=d;e>k;k+=h)setTimeout("window.scrollTo(0, "+i+")",j*g),i+=h,i>e&&(i=e),j++;else for(var k=d;k>e;k-=h)setTimeout("window.scrollTo(0, "+i+")",j*g),i-=h,e>i&&(i=e),j++}}),angular.module("convideoApp").service("toggleEnable",["toaster",function(a){return function(b){return function(c,d){var e,c=c,f=d.find(c);f.set("enabled",!f.get("enabled")),e=f.get("enabled")?b.on:b.off,f.save().then(function(){a.add({title:b.modelName+" "+e,type:"success"})})}}}]),angular.module("convideoApp").directive("sideBar",function(){return{templateUrl:"components/sideBar/sideBar.html",restrict:"E",controller:["$state","CategoriesCollection",function(a,b){var c=this;c.home=function(){a.go("main")},c.collection=new b,c.collection.fetch({enabled:!0}).then(function(){c.links=c.collection.links()})}],controllerAs:"sideBar",link:function(a,b){b.find("#menu-toggle").bind("click",function(){$("#wrapper").toggleClass("active")})}}}),angular.module("convideoApp").value("controlsTemplateValue",["<button ",'ng-click="guxTable.controller.toggleEnable(model._id, guxTable.collection)"','class="btn btn-xs margin-left-1-2"',"ng-class=\"{false: 'btn-success', true: 'btn-danger'}[model.enabled === undefined || model.enabled === false]\">",'<i class="fa"',"ng-class=\"{false: 'fa-eye', true: 'fa-eye-slash'}[model.enabled === undefined || model.enabled === false]\">","</i>","</button>"].join("")),angular.module("convideoApp").run(["$templateCache",function(a){a.put("app/account/login/login.html",'<div class=container><div class=row><div class=col-sm-12><h1>Login</h1></div><div class=col-sm-12><form class=form name=form ng-submit=login(form) novalidate><div class=form-group><label>Email</label><input name=email placeholder=Email class=form-control ng-model=user.email></div><div class=form-group><label>Contraseña</label><input type=password placeholder=Contraseña name=password class=form-control ng-model=user.password></div><div class="form-group has-error"><p class=help-block ng-show="form.email.$error.required && form.password.$error.required && submitted">Por favor ingrese su usuario y contraseña.</p><p class=help-block>{{ errors.other }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Login</button></div></form></div></div><hr></div>'),a.put("app/account/settings/settings.html",'<div class=container><div class=row><div class=col-sm-12><h1>Perfil <small>Cambiar Contraseña</small></h1></div><div class=col-sm-12><form class=form name=form ng-submit=changePassword(form) novalidate><div class=form-group><label>Contraseña Actual</label><input type=password name=password class=form-control ng-model=user.oldPassword mongoose-error><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.other }}</p></div><div class=form-group><label>Nueva Contraseña</label><input type=password name=newPassword class=form-control ng-model=user.newPassword ng-minlength=3 required><p class=help-block ng-show="(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)">La contraseña debe contener al menos 3 cáracteres.</p></div><p class=help-block>{{ message }}</p><button class="btn btn-lg btn-primary" type=submit>Aceptar</button></form></div></div></div>'),a.put("app/account/signup/signup.html",'<div ng-include="\'components/navbar/navbar.html\'"></div><div class=container><div class=row><div class=col-sm-12><h1>Sign up</h1></div><div class=col-sm-12><form class=form name=form ng-submit=register(form) novalidate><div class=form-group ng-class="{ \'has-success\': form.name.$valid && submitted,\n                                            \'has-error\': form.name.$invalid && submitted }"><label>Name</label><input name=name class=form-control ng-model=user.name required><p class=help-block ng-show="form.name.$error.required && submitted">A name is required</p></div><div class=form-group ng-class="{ \'has-success\': form.email.$valid && submitted,\n                                            \'has-error\': form.email.$invalid && submitted }"><label>Email</label><input type=email name=email class=form-control ng-model=user.email required mongoose-error><p class=help-block ng-show="form.email.$error.email && submitted">Doesn\'t look like a valid email.</p><p class=help-block ng-show="form.email.$error.required && submitted">What\'s your email address?</p><p class=help-block ng-show=form.email.$error.mongoose>{{ errors.email }}</p></div><div class=form-group ng-class="{ \'has-success\': form.password.$valid && submitted,\n                                            \'has-error\': form.password.$invalid && submitted }"><label>Password</label><input type=password name=password class=form-control ng-model=user.password ng-minlength=3 required mongoose-error><p class=help-block ng-show="(form.password.$error.minlength || form.password.$error.required) && submitted">Password must be at least 3 characters.</p><p class=help-block ng-show=form.password.$error.mongoose>{{ errors.password }}</p></div><div><button class="btn btn-inverse btn-lg btn-login" type=submit>Sign up</button> <a class="btn btn-default btn-lg btn-register" href=/login>Login</a></div></form></div></div></div>'),a.put("app/admin/admin.html",'<div class=container-fluid><div class="row margin-top"><div class=col-sm-12><ul class="nav nav-tabs"><li role=presentation><a ui-sref=admin.users class=list-group-item ui-sref-active=active>Usuarios</a></li><li role=presentation><a ui-sref=admin.categories class=list-group-item ui-sref-active=active>Categorías</a></li><li role=presentation><a ui-sref=admin.videos class=list-group-item ui-sref-active=active>Videos</a></li><li role=presentation><a ui-sref=admin.questions class=list-group-item ui-sref-active=active>Preguntas</a></li><li role=presentation><a ui-sref=admin.settings class=list-group-item ui-sref-active=active>Perfil</a></li></ul></div><!-- /.col-sm-12 --></div><!-- /.row --><div class="row margin-top-2x"><div class=col-lg-12><section ui-view></section></div><!-- /.col-lg-12 --></div><!-- /.row --></div><!-- /.container-fluid -->'),a.put("app/admin/users/users.html",'<div class=container><div class=row><div class=col-lg-12><button class="btn btn-success" ng-click=users.new()>Nuevo Usuario</button><hr></div><!-- /.col-lg-12 --></div><!-- /.row --><div ng-show=users.showForm class=row><form class=form-horizontal novalidate ng-submit=users.save()><div class=form-group><label class="col-sm-2 control-label">Nombre</label><div class=col-sm-10><input ng-model=users.active.attributes.name placeholder=Nombre class="form-control"></div><!-- /.col-sm-10 --></div><!-- /.form-group --><div class=form-group><label class="col-sm-2 control-label">Email</label><div class=col-sm-10><input type=email ng-model=users.active.attributes.email placeholder=Email class="form-control"></div><!-- /.col-sm-10 --></div><!-- /.form-group --><div class=form-group><label class="col-sm-2 control-label">Contraseña</label><div class=col-sm-10><input type=password ng-model=users.active.attributes.password placeholder=Contraseña class="form-control"></div><!-- /.col-sm-10 --></div><!-- /.form-group --><div class=form-group><div class="col-sm-10 col-sm-offset-2"><div class=checkbox><label><input type=checkbox ng-model=users.active.attributes.role ng-true-value=admin ng-false-value=""> Administrador</label></div><!-- /.checkbox --></div><!-- /.col-sm-10 col-sm-offset-2 --></div><!-- /.form-group --><div class=form-group><div class="col-sm-10 col-sm-offset-2"><div class=btn-toolbar><div class=btn-group><button class="btn btn-primary" type=submit>Aceptar</button></div><!-- /.button-group --><div class=btn-group><button class=btn ng-click=users.cancel($event)>Cancelar</button></div><!-- /.button-group --></div><!-- /.button-toolbar --></div><!-- /.col-sm-10 --></div><!-- /.form-group --></form><!-- /.form-horizontal --><hr></div><!-- /.row --><div class=row><div class=col-lg-12><ul class=list-group><li class=list-group-item ng-repeat="user in users.collection.data"><strong>{{user.get(\'name\')}}</strong><div class="btn-toolbar pull-right"><div class=btn-group ng-show=users.isAdmin()><button ng-click=users.delete(user) class="btn btn-sm btn-danger"><i class="fa fa-trash"></i></button></div><!-- /.btn-group --><div class=btn-group><button ng-click=users.edit(user) class="btn btn-sm btn-warning"><i class="fa fa-pencil"></i></button></div><!-- /.btn-group --></div><!-- /.button-toolbar --><br><span class=text-muted>{{user.get(\'email\')}}</span></li></ul></div><!-- /.col-lg-12 --></div><!-- /.row --></div>'),a.put("app/categories/categories.html",'<tabset><tab heading=Lista><div class=container-fluid><div class=row><div class="col-lg-12 margin-top-1x"><button class="btn btn-primary" ng-click=categories.fetch()>Actualizar</button></div><div class=col-lg-12><gux-table collection=categories.collection table-data=categories.tableData></gux-table></div><!-- /.col-lg-12 --></div><!-- /.row --></div><!-- /.container --></tab><tab><tab-heading><i class="fa fa-plus"></i> Nueva Categoría</tab-heading><new-category></new-category></tab></tabset>'),a.put("app/categories/newCategory/newCategory.html",'<div class="container-fluid margin-top"><div class=row><form name=form role=form class=form-horizontal ng-submit=newCategory.submit() novalidate><div class=form-group><label for=name class="control-label col-md-2">Nombre</label><div class=col-md-10><input name=name class=form-control ng-model=newCategory.model.attributes.name placeholder=Nombre ng-required></div><!-- /.col-md-10 --></div><div class=form-group><label for=type class="control-label col-md-2">Descripción</label><div class=col-md-10><input name=type class=form-control ng-model=newCategory.model.attributes.description placeholder=Descripción></div><!-- /.col-md-10 --></div><div class=form-group><label for=type class="control-label col-md-2">Tipo</label><div class=col-md-10><select name=type class=form-control ng-model=newCategory.model.attributes.type><option value=Videos>Videos</option><option value=FAQ>FAQ</option><option value=Documentos>Documentos</option></select></div><!-- /.col-md-10 --></div><div class=form-group><div class="col-md-offset-2 col-md-10"><input type=submit class="btn btn-primary" value=Crear></div><!-- /.col-md-10 --></div></form></div></div>'),a.put("app/main/main.html",'<header class=hero-unit id=banner style="padding-top: 70px"><div class=container><div class="btn-toolbar btn-absolute-corner-right"><div class=btn-group><a class="btn btn-warning" ui-sref=admin.videos ng-show=isAdmin()>Admin</a></div><div class=btn-group ng-show=isLoggedIn()><button class="btn btn-success" ng-click=logout()>Logout</button></div><div class=btn-group ng-hide=isLoggedIn()><a class="btn btn-success" ui-sref=login>Login</a></div></div><h1>Bienvenido a ConaVideo</h1><p class=lead>Biblioteca de Videos</p></div></header>'),a.put("app/questions/newQuestionForm/newQuestionForm.html",'<div class="container-fluid margin-top-1x"><div class=row><form role=form name=form class=form-horizontal ng-submit=newQuestion.submit() novalidate><legend ng-hide=newQuestion.model._id>Nueva Pregunta</legend><div class=form-group><label for=titled class="control-label col-md-2" ng-required>Nombre</label><div class=col-md-10><input id=title name=title ng-model=newQuestion.model.attributes.name class=form-control placeholder=Nombre ng-required></div><!-- /.col-md-10 --></div><div class=form-group><label for=question class="control-label col-md-2">Pregunta</label><div class=col-md-10><textarea id=question name=question ng-model=newQuestion.model.attributes.question class=form-control placeholder=Pregunta ng-required></textarea></div><!-- /.col-md-10 --></div><div class=form-group ng-if=newQuestion.model._id><label for=question class="control-label col-md-2">Respuesta</label><div class=col-md-10><textarea id=question name=question ng-model=newQuestion.model.attributes.answer class=form-control rows=15 placeholder=Respuesta></textarea></div><!-- /.col-md-10 --></div><div class=form-group><div class="col-md-offset-2 col-md-10"><button class="btn btn-primary" type=submit>Aceptar</button></div><!-- /.col-md-10 --></div></form></div></div>'),a.put("app/questions/question/question.html","<div class=row><div class=col-lg-12><h2 class=text-capitalize>{{question.model.attributes.title}}</h2></div><!-- /.col-lg-12 --><div class=col-lg-12><blockquote><p>{{question.model.attributes.question}}</p><footer>{{question.model.attributes.name}} <cite title=createdAt>{{question.model.attributes.createdAt | date:'dd/MM/yyyy'}}</cite></footer></blockquote></div><!-- /.col-lg-12 --><div ng-if=question.model.attributes.answer class=col-lg-12><p>{{question.model.attributes.answer}}</p><span class=pull-right><strong>{{question.model.attributes.answeredBy.name}}</strong> - {{question.model.attributes.answeredAt | date:'dd/MM/yyyy'}}</span></div><!-- /.col-lg-12 --></div>"),a.put("app/questions/questionsAdmin/questionsAdmin.html",'<tabset><tab heading=Lista><div class=container-fluid><div class=row><div class="col-lg-12 margin-top-1x"><button class="btn btn-primary" ng-click=questions.fetch()>Actualizar</button></div><div class=col-lg-12><gux-table collection=questions.collection table-data=questions.tableData edit=questions.activate(id)></gux-table></div><!-- /.col-lg-12 --></div><!-- /.row --></div><!-- /.container --></tab><tab class=pull-right active=questions.editTab deselect="questions.editTab = false" ng-hide="questions.active === null"><tab-heading><i class="fa fa-pencil"></i></tab-heading><new-question edit-model=questions.active></new-question></tab></tabset>'),a.put("app/videos/newVideo/newVideo.html",'<div class="container-fluid margin-top"><div class=row><form name=form class=form-horizontal ng-submit=newVideo.submit() novalidate><div class=form-group><label for=category class="control-label col-md-2">Categoría</label><div class=col-md-8><select name=category class=form-control ng-model=newVideo.model.attributes._category._id ng-options="category._id as category.name for category in newVideo.categories"><option value="">-- seleccione una categoría --</option></select></div><!-- /.col-md-10 --><div class=col-md-2><button class="btn btn-primary" ng-click=newVideo.fetchCategories($event)><span>Actualizar</span></button></div></div><div class=form-group><label for=name class="control-label col-md-2">Nombre</label><div class=col-md-10><input name=name ng-model=newVideo.model.attributes.name class=form-control placeholder=Nombre ng-required></div><!-- /.col-md-10 --></div><div class=form-group><label for=description class="control-label col-md-2">Descripción</label><div class=col-md-10><textarea id=description name=description ng-model=newVideo.model.attributes.description class=form-control placeholder=Descripción rows=6 ng-required></textarea></div><!-- /.col-md-10 --></div><div class=form-group><label for=author class="control-label col-md-2">Autor</label><div class=col-md-10><input id=author name=author ng-model=newVideo.model.attributes.author class=form-control placeholder=Autor ng-required></div><!-- /.col-md-10 --></div><div class=form-group><label for=type class="control-label col-md-2">Tipo</label><div class=col-md-10><select name=type ng-model=newVideo.model.attributes.type class=form-control><option value="">-- seleccione un tipo --</option><option value="Video Local">Video Local</option><option value=YouTube>YouTube</option></select></div><!-- /.col-md-10 --></div><div class=form-group ng-show="newVideo.model.attributes.type === \'YouTube\'"><label for=source class="control-label col-md-2">Fuente</label><div class=col-md-10><input name=source ng-model=newVideo.model.attributes.source class=form-control placeholder=Fuente ng-required></div><!-- /.col-md-10 --></div><div class=form-group ng-show="newVideo.model.attributes.type === \'Video Local\'"><label for=file class="control-label col-md-2">Archivo de Video</label><div ng-show=newVideo.model.attributes.source class=col-md-10><button ng-click=newVideo.toggleUploadField($event) class="btn btn-warning"><i class="fa fa-upload"></i>&nbsp;Subir nuevo video</button></div><div ng-hide=newVideo.model.attributes.source ng-class="{false: \'col-md-8\', true: \'col-md-10\'}[newVideo.model.attributes.oldSource === undefined]"><input name=file type=file ng-file-select ng-file-model=newVideo.file ng-file-change=newVideo.fileChange($files) class=form-control placeholder=Fuente ng-required><div class="progress margin-top" ng-hide="newVideo.progress === 0"><div class="progress-bar progress-bar-info progress-bar-striped active" role=progressbar aria-valuenow={{newVideo.progress}} aria-valuemin=0 aria-valuemax=100 style="width: {{newVideo.progress}}%">{{newVideo.progress}}%</div></div></div><!-- /.col-md-10 --><div class=col-md-2 ng-hide="newVideo.model.attributes.oldSource === undefined"><button ng-click=newVideo.toggleUploadField($event) class="btn btn-danger btn-block"><i class="fa fa-minus"></i>&nbsp;Cancelar</button></div></div><div class=form-group><label for=image class="control-label col-md-2">Imagen</label><div class=col-md-10><input name=image ng-model=newVideo.model.attributes.image class=form-control placeholder=Imagen ng-required></div><!-- /.col-md-10 --></div><div class=form-group><div class="col-md-offset-2 col-md-10"><button class="btn btn-primary" type=submit>Aceptar</button></div><!-- /.col-md-10 --></div></form></div></div>'),a.put("app/videos/videos.html",'<div class=container-fluid><div class=col-lg-12><h1 id=video-title>{{videos.current.get(\'name\')}}</h1><hr><div class="embed-responsive embed-responsive-16by9" id=video-frame><iframe class=embed-responsive-item ng-src="{{videos.current.get(\'source\') | trusted}}" ng-if="videos.current.get(\'type\') === \'YouTube\'"></iframe><video ng-src="{{videos.current.get(\'source\')}}" ng-if="videos.current.get(\'type\') === \'Video Local\'" controls autoplay></video></div><hr><tabset><tab heading="Lista de Videos"><h2>Lista de Vídeos</h2><video-item ng-repeat="video in videos.collection.data" model=video on-click=videos.setCurrent(model) active={{$first}}></video-item></tab><tab heading=Preguntas><h2>Preguntas <a href="javascript: void(0);" class="btn btn-success pull-right" ng-click=videos.toggleForm() ng-hide=videos.showForm><i class="fa fa-plus"></i> Nueva Pregunta</a> <a href="javascript: void(0);" class="btn btn-danger pull-right" ng-click=videos.toggleForm() ng-show=videos.showForm><i class="fa fa-minus"></i> Cerrar Formulario</a></h2><div class=container><new-question ng-show=videos.showForm category={{videos._category}}></new-question><question model=question ng-repeat="question in videos.questions.data" ng-if=question.attributes.answer></question></div><!-- /.container --></tab></tabset></div><!-- /.col-lg-12 --></div><!-- /.container-fluid -->'),a.put("app/videos/videosAdmin/videosAdmin.html",'<tabset><tab heading=Lista><div class=container-fluid><div class=row><div class="col-lg-12 margin-top-1x"><button class="btn btn-primary" ng-click=videos.fetch()><span>Actualizar</span></button></div><div class=col-lg-12><gux-table collection=videos.collection table-data=videos.tableData edit=videos.activate(id)></gux-table></div><!-- /.col-lg-12 --></div><!-- /.row --></div><!-- /.container --></tab><tab><tab-heading><i class="fa fa-plus"></i> Nuevo Video</tab-heading><new-video categories=categories></new-video></tab><tab class=pull-right active=videos.editTab deselect="videos.editTab = false" ng-hide="videos.active === null"><tab-heading><i class="fa fa-pencil"></i></tab-heading><new-video edit-model=videos.active categories=categories></new-video></tab></tabset>'),a.put("components/directives/guxTable/guxTable.html",'<div class="row margin-top"><div class="col-xs-4 col-sm-3"><select class=form-control ng-model=guxTable.paginationValue ng-options="value for value in guxTable.paginationValues"></select></div><div class="col-xs-6 col-xs-offset-2 col-sm-4 col-sm-offset-5 form-group has-feedback"><input ng-model=guxTable.filter class=form-control aria-describedby="inputSearch"> <span class="fa fa-search form-control-feedback" aria-hidden=true></span> <span class=sr-only>(search)</span></div><!-- /.div --></div><!-- /.row --><div class=table-responsive-always><table class="table table-hover table-striped table-condensed margin-top-2"><thead><tr><th ng-repeat="column in tableData.headers" class="{{(column.headerClass || \'\')}} pointer" ng-click=guxTable.sortBy(column.attribute)>{{column.header}} <span class=pull-right ng-show="guxTable.sortAttr === column.attribute"><i class=fa ng-class="{true: \'fa-chevron-up\', false: \'fa-chevron-down\'}[guxTable.sortReverse]"></i></span></th><th class=text-center>...</th></tr></thead><tbody></tbody></table><!-- /.table table-hover table-striped --></div><div class=row><div class=col-lg-12><pagination class="pull-right pagination-sm" total-items=guxTable.filtered.length items-per-page=guxTable.paginationValue ng-model=guxTable.currentPage boundary-links=true previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo;></pagination></div><!-- /.col-lg-12 --></div><!-- /.row -->'),a.put("components/directives/videoItem/videoItem.html",'<a class="list-group-item list-group-item-high" href="javascript: void(0);"><div class="media col-md-3"><figure class=pull-left><img ng-src="{{video.model.get(\'image\') || \'http://placehold.it/300x190\'}}" alt="{{video.model.get(\'title\') + \'- imagen\'}}" class="media-object img-rounded img-responsive"></figure><!-- /.pull-left --></div><div class=col-md-7><h4 class=list-group-item-heading>{{video.model.get(\'name\')}}</h4><p class=list-group-item-text>{{video.model.get(\'description\')}}</p><!-- /.list-group-item-text --></div><div class=col-md-2><button class="btn btn-default btn-lg btn-block" name=playNow ng-click=video.select()>Ver Ahora</button></div></a>'),a.put("components/loading/loading.html","<span ng-show=loading.on><div class=loading></div><div class=overlay></div></span>"),a.put("components/navbar/navbar.html",'<div class="navbar navbar-inverse navbar-static-top" ng-controller=NavbarCtrl><div class=container-fluid><div class=navbar-header><button class=navbar-toggle type=button ng-click="isCollapsed = !isCollapsed"><span class=sr-only>Toggle navigation</span> <span class=icon-bar></span> <span class=icon-bar></span> <span class=icon-bar></span></button> <a href="/" class=navbar-brand>ConaVideo</a></div><div collapse=isCollapsed class="navbar-collapse collapse" id=navbar-main><ul class="nav navbar-nav"><li ng-repeat="item in menu" ng-class="{active: isActive(item.link)}"><a ng-href={{item.link}}>{{item.title}}</a></li><li ng-show=isAdmin() ng-class="{active: isActive(\'/admin\')}"><a href=/admin>Admin</a></li></ul><ul class="nav navbar-nav navbar-right"><li ng-show=isLoggedIn()><p class=navbar-text>Hello {{ getCurrentUser().name }}</p></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/settings\')}"><a href=/settings><span class="glyphicon glyphicon-cog"></span></a></li><li ng-show=isLoggedIn() ng-class="{active: isActive(\'/logout\')}"><a href="" ng-click=logout()>Logout</a></li></ul></div></div></div>'),a.put("components/sideBar/sideBar.html",'<div id=sidebar-wrapper><ul id=sidebar_menu class=sidebar-nav><li class=sidebar-brand><a href="javascript: void(0);" id=menu-toggle><span class=white-on-hover ng-click=sideBar.home()>ConaVideo</span> <i class="fa fa-align-justify main-icon"></i></a></li><!-- /.sidebar-brand --></ul><!-- /#sidebar-menu.sidebar-nav --><ul class=sidebar-nav id=sidebar><li ng-repeat="link in sideBar.links"><a href={{link.url}}>{{link.name}}<i tooltip={{link.name}} tooltip-trigger=mouseenter tooltip-placement=right class="fa sub-icon {{link.icon || \'fa-link\'}}"></i></a></li></ul><!-- /#sidebar.sidebar-nav --></div><!-- /#sidebar-wrapper -->'),a.put("components/templates/defaultTable.html",'<div class=row><div class=col-xs-4 style="padding-left: 0"><div class=col-xs-4><select ng-model=sedTable.modelsPerPage class=form-control><option value=2>2</option><option value=10>10</option><option value=20>20</option><option value=50>50</option><option value=100>100</option><option value=100>500</option><option value=100>1000</option><option value=100>2000</option><option value=100>5000</option></select></div><!-- /.col-xs-4 --><div class=col-xs-8><a class="btn btn-info" ng-show="sedTable.selectedModel !== null" href={{sedTable.detailsState()}}>Detalles</a></div><!-- /.col-xs-8 --></div><!-- /.col-xs-6 --><div class=col-xs-8><div class=row><div class=col-xs-6><span class="dropdown pull-right"><a href class="dropdown-toggle btn btn-success">Columnas</a><ul class=dropdown-menu><li ng-repeat="column in sedTable.data"><a ng-class="{\'text-danger\': !column.show, \'text-success\': column.show}" href="javascript:void(0); class=" link-undecorated><input name={{column.name}} type=checkbox ng-model="column.show">&nbsp;<label>{{column.name}}</label></a></li></ul></span></div><!-- /.col-xs-6 --><div class=col-xs-6><div class="form-group input-group dropdown"><input type=search class=form-control ng-model=sedTable.searchString placeholder="{{sedTable.filterFieldName||\'Filtro Rapido\'}}"><ul class=dropdown-menu><li ng-class="{\'active\': sedTable.filterField === \'\'}"><a ng-click=selectFilterField() href=javascript:void(0) class=link-undecorated>Todas las columnas</a></li><li ng-repeat="column in sedTable.data" ng-class="{\'active\': sedTable.filterField === column.attribute}"><a ng-click=sedTable.selectFilterField(column) href=javascript:void(0); class=link-undecorated>{{column.name}}</a></li></ul><span class="input-group-addon input-group-addon-success btn btn-success dropdown-toggle"><i class="fa fa-search"></i>&nbsp;{{sedTable.filterFieldName}}</span></div><!-- /.form-group --></div><!-- /.col-xs-6 --></div><!-- /.row --></div><!-- /.col-xs-6 --></div><!-- /.row --><div class=table-responsive-always><table class="table table-hover table-striped"><thead></thead><tbody></tbody></table><!-- /.table table-hover table-striped --></div><!-- /.table-responsive --><div class=row><div class=col-xs-12><pagination class=pull-right boundary-links=true items-per-page=sedTable.modelsPerPage total-items=sedTable.totalItems ng-model=sedTable.currentPage class=pagination-sm previous-text=&lsaquo; next-text=&rsaquo; first-text=&laquo; last-text=&raquo;></pagination></div><!-- /.col-xs-6 --></div><!-- /.row -->')}]);